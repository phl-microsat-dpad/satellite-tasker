{% extends "base.html" %}

{% block cssimports %}
<style>
    #map {
        width: 100%;
        height: 100%;
    }
</style>
{% endblock %}

{% block content %}
<h1>Imagery Request Form</h1>

<form id="order-form">
    <div class="form-group">
        <label for="order-fname">First Name</label>
        <input type="text" class="form-control" id="order-fname" placeholder="First Name" name="fname"/>
    </div>

    <div class="form-group">
        <label for="order-lname">Last Name</label>
        <input type="text" class="form-control" id="order-lname" placeholder="Last Name" name="lname"/>
    </div>

    <div class="form-group">
        <label for="order-institution">Institution</label>
        <input type="text" class="form-control" id="order-lname" placeholder="Institution" name="institution"/>
    </div>

    <div class="form-group">
        <label for="order-address-1">Address</label>
        <input type="text" class="form-control" id="order-address-1" placeholder="Address Line 1" name="address-1"/>
    </div>

    <div class="form-group">
        <input type="text" class="form-control" id="order-address-2" placeholder="Address Line 2" name="address-2"/>
    </div>

    <div class="form-group">
        <label for="order-address-1">City</label>
        <input type="text" class="form-control" id="order-city" placeholder="City" name="city"/>
    </div>

    <div class="form-group">
        <label for="order-zip">Zip Code</label>
        <input type="text" class="form-control" id="order-zip" placeholder="Zip" name="zip"/>
    </div>

    <div class="form-group">
        <label for="order-email">Email Address</label>
        <input type="email" class="form-control" id="order-email" placeholder="Email" name="email"/>
    </div>
    
    <div class="form-group">
        <label for="order-telephone">Telephone</label>
        <input type="text" class="form-control" id="order-telephone" placeholder="Telephone" name="telephone"/>
    </div>

    <div class="form-group">
        <label for="order-type">Fax</label>
        <input type="text" class="form-control" id="order-fax" placeholder="Fax" name="fax"/>
    </div>

    <div class="form-group">
        <div id="map"></div>
    </div>

    <div class="form-group">
        <label for="order-field-of-app">Field of Application</label>
        <div class="radio">
            <label><input type="radio" name="field-of-app">Research</label>
        </div>
        <div class="radio">
            <label><input type="radio" name="field-of-app">Educational</label>
        </div>
        <div class="radio">
            <label><input type="radio" name="field-of-app" disabled>Operational/Commercial Demonstration</label>
        </div>
    </div>

    <div class="form-group">
        <label for="sel1">Primary Area of Study</label>
        <select class="form-control" id="order-area-of-study" name="area-of-study">
            <option>Agricultural</option>
            <option>Climate / Atmospheric</option>
            <option>Disaster and Calamities</option>
            <option>Environmental Assessment</option>
            <option>Infrastrucure</option>
            <option>Scientific Research and Education</option>
            <option>Water resources</option>
            <option>Others</option>
        </select>
    </div>        

    <div class="form-group">
        <label for="sel1">Affiliation</label>
        <select class="form-control" id="order-affiliation" name="affiliation">
            <option>Government</option>
            <option>Academe</option>
            <option>NGO</option>
            <option>Private</option>
        </select>
    </div>    

    <button type="submit" class="btn btn-primary">Submit</button>
</form>

{% endblock %}


{% block jsimports %}
<script type="text/javascript">
    $(document).ready(function(){
        $("#order-form").on("submit", function(e){
            e.preventDefault();
            $.post("/api/order", $("#order-form").serializeArray());
        });

        initialize_map();
    });    

    function initialize_map(){
        // initialize map
        var map = L.map('map');

        var osmUrl='http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';
        var osmAttrib='Map data Â© <a href="http://openstreetmap.org">OpenStreetMap</a> contributors';
        var osm = new L.TileLayer(osmUrl, {minZoom: 2, maxZoom: 12, attribution: osmAttrib});       

        map.setView(new L.LatLng(11.5, 121.8), 6);
        map.addLayer(osm);

        // add AreaSelect with keepAspectRatio:true
        var areaSelect = L.areaSelect({
            width:100, 
            height:100, 
        });
        areaSelect.addTo(map);
     
        // Get a callback when the bounds change
        areaSelect.on("change", function() {
            console.log("Bounds:", this.getBounds());
        });
    }
</script>
{% endblock %}